# 필요한 개념 정리

- 스크래핑

## 스크래핑

HTML 문서를 받은 후 문서를 파싱해서 필요한 데이터를 추출

그렇다면 아무 사이트에서 데이터를 마구 가져와도 되는건가???

데이터는 회사의 중요한 자산이 되고 해당 회사의 웹 서버에 부하가 발생할 수 있다.

스크래핑 서버는 결국 해당 회사의 웹 서버에 REQUEST 를 통해 HTML 파일을 받는것이기 때문에
실제 서비스 중인 회사의 웹 서버에 부하를 줄 수 있다.

이제 긁어오면 안되는 것을 어떻게 파악할까??

`robots.txt`

즉, 스크래핑을 할 때에는 `robots.txt에 정의된 규칙을 준수`하고 `요청 서버에 무리가 가지 않은 선에서 요청할 것`!

## DB 설계

이때까지 한 프로젝트는 대부분 pk를 auto-increment 를 활용했다.

분산 이유 : 서버 컴퓨터 한대에 모든 데이터를 저장하기에는 하드디스크의 용량 한계가 존재
따라서 여러대의 서버에 분산시켜서 저장

`분산 처리 시스템`

## Garbage Collection

- 메모리 할당 후 해제가 안되면 메모리 누수 발생
- 수동으로 개발자가 직접 해제할 경우(c언어), 올바르게 해제되지 않아 버그 발생 가능성 높음
- 가비지 컬렉터는 동적으로 할당된 매모리 영역 중 더 이상 쓰이지 않는 여영ㄱ을 찾아내서 해제


## LocalDateTime

숫자를 날짜로 변환 

`LocalDateTime date = LocalDateTime.of(2020, 5, 13, 6, 30)`

## Trie

Trie에 데이터 저장하기
- 삽입하고자 하는 문자열을 앞에서부터 한 글자씩 가져온다.
- 트리의 루트부터 적합한 노드 위치를 찾아가면서 저장
- 마지막 글자까지 삽입이 되면 isEnd 플래그로 단어의 끝을 표시

Trie에서 데이터 검색하기
- 입력으로 받은 문자열을 한글자씩 파싱
- 파싱된 문자를 앞에서부터 비교
- 해당 문자가 존재하지 않거나, 리프노드에 도달할 때 까지 탐색

시간 복잡도
O(L)
L : 문자열의 길이

단점
- 메모리

## Like 연산자
- 부분적으로 일치하는 조건으로 데이터를 찾기 위해 사용
- 특정 문자열이 포함된 경우
- 특정 문자열로 시작하거나 종료될 때

% : 모든 문자
_ : 한 글자

- NOT LIKE
- LIKE IN


## Trie vs DB like 연산자

데이터의 양과 해당 연산이 발생하는 비율등을 고려해서 DB에 영향을 주지 않을 정도의 트래픽의 경우
like 연산자를 활용

## 스케줄러

일정 주기마다 특정 작업을 수행

자바 스케줄러에서 실행 주기를 설정하는 방법
- fixedDelay : 이전에 수행했던 수행 시점을 기준으로 일정 시간 후에 다음 수행을 시작, 이전 수행이 종료된 시점을 기준
- fixedRate : 이전에 수행했던 수행 시점을 기준으로 일정 시간 후에 다음 수행을 시작, 이전 수행이 시작된 시점을 기준
- cron

### Cron 표현식
- 스케쥴러 정규 표현식
- 초/분/시/일/월/요일/년도(생략가능)
  - 0 5 * * * *
  - 0 0/10 * * * *

- * : 모든 수
- ? : 조건 없음(날짜와 요일에만 사용)
- - : 범위(기간) 지정
- , : 특정 여러 시간 지정
- / : 시작 시간과 반복 간격
- L : 지정할 수 있는 범위의 마지막 값(날짜와 요일에만 사용)

- 0 0 14 * * * : 매일 오후 2시
- 0 0 0 1 * * : 매달 1일 0시
- 0 5 1 ? 7 MON-WEB : 매년 7월 월-수까지 1시 5분

## Unique Key
- 중복 데이터 저장을 방지하는 제약조건
- 단일 컬럼 뿐 아니라 복합 컬럼을 지정할 수도 있음

## INSERT IGNORE
중복키 데이터를 삽입하려고 하면 해당 레코드를 무시하고 처리
- INSERT IGNORE INTO [TABLE] (COLUMN1, COLUMN2) VALUES (VALUE1, VALUE2)

## ON DUPLICATE KEY UPDATE
중복된 키의 레코드가 들어왔을 때 레코드의 컬럼값 중에서 update 키워드 뒤에 정의된 컬럼들의 값을 update
- INSERT INTO [TABLE] (COLUMN1, COLUMN2) VALUES (VALUE1, VALUE2) ON DUPLICATE KEY UPDATE (...)

## DB Index

- Cardinality : 중복된 데이터가 많은 상태면 cardinality가 낮은 데이터라고 표현한다.
- 성별 : 데이터의 중복이 많은 성격의 데이터, cardinality가 낮은 데이터, 인덱스를 걸어도 효과적으로 동작 X
- 주민등록번호 
인덱스 설정 시 selectivity(선택도), 해당 쿼리가 얼마나 호출되는 지도 고려해봐야 한다.

## InterruptedException

- 인터럽트를 받는 스레드가 blocking 될 수 있는 메서드를 실행할 때 발생
- Thread.sleep() 에서만 발생하는 건 아니다.

## sleep() vs wait()

- wait() : 스레드를 대기 상태로 변경

상태가 변경된 스레드는 notify()나 notifyAll() 메서드를 호출할 때까지 자동으로 깨지 않는다.

## Thread 5 Status

- New
- Ready
- Running
- BLocked/Waiting
- Exit

## Thread Pool

- 여러 개의 스레드를 유지/관리

Thread pool의 적정 사이즈는?
- CPU 처리가 많은 경우 : CPU의 코어 개수 N 개일 경우 N + 1개의 Thread를 만들면 최적일 것이다.
- I/O 작업이 많은 경우 : 코어 개수 N * 2

## 캐시

- 임시로 데이터를 저장하는 공간

왜 쓸까?
- 성능 향상

## Redis

- key-value 구조
- 인메모리 데이터 스토어
- 다양한 형태의 데이터 타입 지원
- 주로 캐시 서버 용도로 많이 사용

- Single
- Sentinel(master - slave)
- Cluster







